---
output:
  rmarkdown::github_document:
    html_preview: no
---

```{r, include = FALSE}
knitr::opts_chunk$set(fig.path = "man/figures/README-", fig.align = "center")
```

<!--- README.md is generated from README.Rmd. Please edit that file -->

# Tiles for visualizing large spatial data

[![Project Status: WIP - Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](http://www.repostatus.org/badges/latest/wip.svg)](http://www.repostatus.org/#wip)
[![Travis Build Status](https://img.shields.io/travis/jeffreyhanson/tiler/master.svg?label=Mac%20OSX%20%26%20Linux)](https://travis-ci.org/jeffreyhanson/tiler)
[![AppVeyor Build Status](https://img.shields.io/appveyor/ci/jeffreyhanson/tiler/master.svg?label=Windows)](https://ci.appveyor.com/project/jeffreyhanson/tiler)
[![Coverage Status](https://codecov.io/github/jeffreyhanson/tiler/coverage.svg?branch=master)](https://codecov.io/github/jeffreyhanson/tler?branch=master)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/tiler)](https://CRAN.R-project.org/package=tiler)

The _tiler R_ package can be used to render spatial data sets as [tiles](https://en.wikipedia.org/wiki/Tile_Map_Service). The advantage of rendering spatial data as tiles for use in web applications is that the tile format reduces the amount of data that users need to download to view the data.

```{r, include = FALSE}
devtools::load_all()
```

## Installation

This package requires _Python_ 2.7 to be installed on the system. Additionally, the _gdal_ python library also needs to be installed. This can be achieved by running the following code in the terminal on Ubuntu 16.04.

```{bash, eval = FALSE}
sudo apt-add-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get update
sudo apt-get install gdal-bin python-gdal
```

Now, the _tiler R_ package can be installed using the following _R_ code:

```{r, eval = FALSE}
if (!require(devtools))
  install.packages("devtools")
devtools::install_github("jeffreyhanson/tiler")
```

## Example usage

Let's use this package to create tiles for visualizing a raster data set. Although the data set used in this example is rather small, the `tiles` function can be used to create tile data for large raster data sets. This means that _shiny_ applications can include large raster data sets without users needing to wait a long time to view the data.

```{r}
# load packages
library(leaflet)
library(tiler)

# load example data set
data(netherlands, package = "mapmisc")

# create leaflet map and visualize data using tiles
map <- leaflet() %>%
       setView(lng = 5.75560, lat = 50.94723, zoom = 12) %>%
       addProviderTiles("Esri.WorldImagery", group = "Basemap") %>%
       addTiles(tiles(nldElev, output_dir = tempdir(), zoom = "10-16"),
                group = "Elevation",
                options = tileOptions(minZoom = 5, maxZoom = 16,
                                      tms = TRUE)) %>%
       addLayersControl(baseGroups = "Basemap", overlayGroups = "Elevation",
                        options = layersControlOptions(collapsed = FALSE))

# render map
print(map)
```

Note that we set the argument `output_dir` to a temporary directory. For real-world applications, you would set this to a persistent directory so that the tiling process is only performed once.

## Citation

```{r, echo  = FALSE, result = "asis", comment = ""}
cat(paste0("Hanson JO (2017) tiler: Tiles for mapping large spatial data. R package version ", packageDescription("tiler")$Version,". https://github.com/jeffreyhanson/tiler.\n"))
```
