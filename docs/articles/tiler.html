<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>tiler • tiler</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">tiler</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jeffreyhanson/tiler">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>tiler</h1>
            
          </div>

    
    
<div class="contents">
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The <em>tiler R</em> package can be used to render spatial data sets as <a href="https://en.wikipedia.org/wiki/Tile_Map_Service">tiles</a>. The advantage of rendering spatial data as tiles for use in web applications is that the tile format reduces the amount of data that users need to download to view the data. The disadvantage, however, is that the spatial data first needs to be converted to the tile format. Depending on the size of your data and the computational resources that you have available, tiling your data could take a very long time. I would recommend trying out the normal mapping functions available in the <a href="https://rstudio.github.io/leaflet/"><em>leaflet R</em> package</a>, and make sure that you really need to use tiling before out trying out this package.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The <em>tiler R</em> package requires <em>python</em> (version 2.7+) installed. It also requires that the <em>gdal python</em> package is also installed. I have found setting up this software on Windows 7 to be quite a nightmare. Therefore, the <em>tiler R</em> package is only available on Unix systems for the moment. The easiest way to setup a system on Ubuntu (version 16+) is using the following system commands.</p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash"><span class="fu">sudo</span> apt-add-repository ppa:ubuntugis/ubuntugis-unstable
<span class="fu">sudo</span> apt-get update
<span class="fu">sudo</span> apt-get install gdal-bin python-gdal</code></pre></div>
<p>Note that this may affect previously installed versions of the <em>rgdal</em>, <em>sf</em>, and <em>maptools R</em> packages. If these <em>R</em> packages—or indeed any other packages—fail to load after running the previous system commands, you will need to reinstall the <em>R</em> packages to use them.</p>
<div id="example-usage" class="section level3">
<h3 class="hasAnchor">
<a href="#example-usage" class="anchor"></a>Example usage</h3>
<p>The <em>tiler R</em> package is designed to be used in conjunction with the <em>leaflet R</em> package. Below are some examples using the <em>tiler R</em> package.</p>
</div>
</div>
<div id="leaflet" class="section level2">
<h2 class="hasAnchor">
<a href="#leaflet" class="anchor"></a>Leaflet</h2>
<p>Here is an example of using the tiler package to visualize a small raster data set. Although the data set used in this example is rather small, the <code>tiles</code> function can be used to create tile data for large raster data sets. Note that you will need to use <code>options = tileOptions(tms = TRUE)</code> when adding tiles to a map. If you forget to include this option, then the map will not show the spatial data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load packages</span>
<span class="kw">library</span>(tiler)
<span class="kw">library</span>(leaflet)

<span class="co"># load example data set</span>
<span class="kw">data</span>(netherlands, <span class="dt">package =</span> <span class="st">"mapmisc"</span>)

<span class="co"># create leaflet map and visualize data using tiles</span>
map &lt;-<span class="st"> </span><span class="kw">leaflet</span>() <span class="op">%&gt;%</span>
<span class="st">       </span><span class="kw">setView</span>(<span class="dt">lng =</span> <span class="fl">5.75560</span>, <span class="dt">lat =</span> <span class="fl">50.94723</span>, <span class="dt">zoom =</span> <span class="dv">12</span>) <span class="op">%&gt;%</span>
<span class="st">       </span><span class="kw">addProviderTiles</span>(<span class="st">"Esri.WorldImagery"</span>, <span class="dt">group =</span> <span class="st">"Basemap"</span>) <span class="op">%&gt;%</span>
<span class="st">       </span><span class="kw">addTiles</span>(<span class="kw"><a href="../reference/tiles.html">tiles</a></span>(nldElev, <span class="dt">output_dir =</span> <span class="kw">tempdir</span>(), <span class="dt">zoom =</span> <span class="st">"10-16"</span>),
                <span class="dt">group =</span> <span class="st">"Elevation"</span>,
                <span class="dt">options =</span> <span class="kw">tileOptions</span>(<span class="dt">minZoom =</span> <span class="dv">5</span>, <span class="dt">maxZoom =</span> <span class="dv">16</span>,
                                      <span class="dt">tms =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">       </span><span class="kw">addLayersControl</span>(<span class="dt">baseGroups =</span> <span class="st">"Basemap"</span>, <span class="dt">overlayGroups =</span> <span class="st">"Elevation"</span>,
                        <span class="dt">options =</span> <span class="kw">layersControlOptions</span>(<span class="dt">collapsed =</span> <span class="ot">FALSE</span>))

<span class="co"># render map</span>
<span class="kw">print</span>(map)</code></pre></div>
</div>
<div id="shiny" class="section level2">
<h2 class="hasAnchor">
<a href="#shiny" class="anchor"></a>Shiny</h2>
<p>Now let’s build a <em>shiny</em> application that displays the spatial data set. Note that we have set <code>shiny = TRUE</code> to tell the <code>tiles</code> function that the tiles function that we are running it inside a <em>shiny</em> application. Also, we have put the <code>tiles</code> function in a <code>start</code> function so the tiles are made while initializing the application (equivalent to putting code in a “global.R” <em>R shiny</em> script).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load packages</span>
<span class="kw">library</span>(shiny)
<span class="kw">library</span>(leaflet)
<span class="kw">library</span>(tiler)

<span class="co"># define function to build tiles on start</span>
start &lt;-<span class="st"> </span><span class="cf">function</span>() {
  <span class="kw">data</span>(netherlands, <span class="dt">package =</span> <span class="st">"mapmisc"</span>)
  path &lt;&lt;-<span class="st"> </span><span class="kw"><a href="../reference/tiles.html">tiles</a></span>(nldElev, <span class="dt">output_dir =</span> <span class="kw">tempdir</span>(), <span class="dt">zoom =</span> <span class="st">"10-16"</span>, <span class="dt">shiny =</span> <span class="ot">TRUE</span>)
}

<span class="co"># define ui</span>
ui &lt;-<span class="st"> </span><span class="kw">fluidPage</span>(<span class="kw">leafletOutput</span>(<span class="st">"map"</span>))

<span class="co"># define server function</span>
server &lt;-<span class="st"> </span><span class="cf">function</span>(input, output, session) {
  output<span class="op">$</span>map &lt;-<span class="st"> </span><span class="kw">renderLeaflet</span>({
    <span class="kw">leaflet</span>() <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">setView</span>(<span class="dt">lng =</span> <span class="fl">5.75560</span>, <span class="dt">lat =</span> <span class="fl">50.94723</span>, <span class="dt">zoom =</span> <span class="dv">12</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">addProviderTiles</span>(<span class="st">"Esri.WorldImagery"</span>, <span class="dt">group =</span> <span class="st">"Basemap"</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">addTiles</span>(path, <span class="dt">group =</span> <span class="st">"Elevation"</span>,
             <span class="dt">options =</span> <span class="kw">tileOptions</span>(<span class="dt">minZoom =</span> <span class="dv">5</span>, <span class="dt">maxZoom =</span> <span class="dv">16</span>, <span class="dt">tms =</span> <span class="ot">TRUE</span>)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">addLayersControl</span>(<span class="dt">baseGroups =</span> <span class="st">"Basemap"</span>, <span class="dt">overlayGroups =</span> <span class="st">"Elevation"</span>,
                     <span class="dt">options =</span> <span class="kw">layersControlOptions</span>(<span class="dt">collapsed =</span> <span class="ot">FALSE</span>))
  })
}

<span class="co"># launch shiny app</span>
<span class="kw">shinyApp</span>(ui, server, <span class="dt">onStart =</span> start)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#leaflet">Leaflet</a></li>
      <li><a href="#shiny">Shiny</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="http://jeffrey-hanson.com">Jeffrey O Hanson</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
